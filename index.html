<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The ADHD Email Odyssey: Interactive Chaos Simulator</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;700&family=Inter:wght@300;400;600;800&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
            min-height: 100vh;
            overflow-x: hidden;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .game-viewport {
            width: 100vw;
            height: 100vh;
            position: relative;
            overflow: hidden;
        }

        /* Enhanced HUD */
        .game-hud {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.95);
            backdrop-filter: blur(15px);
            border: 2px solid rgba(255,255,255,0.15);
            border-radius: 20px;
            padding: 15px 20px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            z-index: 1000;
            font-family: 'JetBrains Mono', monospace;
            font-size: 11px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.6);
            min-width: 200px;
        }

        .stat-group {
            display: flex;
            align-items: center;
            gap: 12px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
        }

        .stat-icon {
            font-size: 16px;
            width: 20px;
            text-align: center;
        }

        .stat-info {
            display: flex;
            flex-direction: column;
            gap: 2px;
            flex: 1;
        }

        .stat-label {
            font-size: 10px;
            color: rgba(255,255,255,0.8);
            font-weight: 600;
        }

        .stat-bar {
            width: 120px;
            height: 8px;
            background: rgba(255,255,255,0.15);
            border-radius: 4px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);
        }

        .stat-fill {
            height: 100%;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 4px;
            box-shadow: 0 0 10px rgba(255,255,255,0.3);
        }

        .anxiety-fill { 
            background: linear-gradient(90deg, #ff4757, #ff3838);
            box-shadow: 0 0 15px rgba(255, 71, 87, 0.5);
        }
        .procrastination-fill { 
            background: linear-gradient(90deg, #ffa502, #ff8c00);
            box-shadow: 0 0 15px rgba(255, 165, 2, 0.5);
        }
        .dopamine-fill { 
            background: linear-gradient(90deg, #2ed573, #00d962);
            box-shadow: 0 0 15px rgba(46, 213, 115, 0.5);
        }
        .focus-fill { 
            background: linear-gradient(90deg, #3742fa, #2f3bec);
            box-shadow: 0 0 15px rgba(55, 66, 250, 0.5);
        }

        .heart-rate-group {
            display: flex;
            align-items: center;
            gap: 8px;
            padding-top: 8px;
            border-top: 1px solid rgba(255,255,255,0.1);
            margin-top: 4px;
        }

        .heart-rate {
            color: #ff4757;
            font-weight: 700;
            font-size: 14px;
            animation: heartbeat 1.2s infinite;
            text-shadow: 0 0 10px rgba(255, 71, 87, 0.5);
        }

        @keyframes heartbeat {
            0%, 50%, 100% { transform: scale(1); opacity: 1; }
            25% { transform: scale(1.1); opacity: 0.8; }
        }

        /* Title Screen */
        .title-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: 
                radial-gradient(circle at 20% 50%, rgba(120, 0, 255, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 0, 150, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(0, 255, 200, 0.2) 0%, transparent 50%),
                linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
            z-index: 100;
            overflow: hidden;
        }

        .title-screen::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="white" opacity="0.1"/><circle cx="75" cy="75" r="1" fill="white" opacity="0.05"/><circle cx="50" cy="10" r="0.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100%" height="100%" fill="url(%23grain)"/></svg>');
            opacity: 0.4;
            animation: float 20s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(2deg); }
        }

        .title-logo {
            font-size: clamp(3rem, 10vw, 5rem);
            font-weight: 800;
            margin-bottom: 30px;
            background: linear-gradient(
                135deg, 
                #ffffff 0%, 
                #f39c12 25%, 
                #e74c3c 50%, 
                #8e44ad 75%, 
                #3498db 100%
            );
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: rainbow 4s ease-in-out infinite;
            filter: drop-shadow(0 4px 12px rgba(255,255,255,0.3)) drop-shadow(0 0 30px rgba(255,255,255,0.1));
            position: relative;
        }

        @keyframes rainbow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .title-logo::after {
            content: '📧 THE EMAIL ODYSSEY';
            position: absolute;
            top: 0;
            left: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shimmer 3s ease-in-out infinite;
        }

        .subtitle {
            font-size: 1.6rem;
            margin-bottom: 40px;
            font-weight: 300;
            background: linear-gradient(45deg, #ecf0f1, #bdc3c7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 2px 8px rgba(0,0,0,0.3);
            letter-spacing: 1px;
        }

        .game-description {
            max-width: 700px;
            margin-bottom: 50px;
            font-size: 1.2rem;
            line-height: 1.8;
            background: linear-gradient(45deg, rgba(255,255,255,0.9), rgba(255,255,255,0.7));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 2px 6px rgba(0,0,0,0.4);
            font-weight: 400;
            padding: 0 20px;
        }

        .start-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            color: white;
            border: none;
            padding: 25px 50px;
            border-radius: 50px;
            font-size: 1.3rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 
                0 15px 35px rgba(102, 126, 234, 0.4),
                0 5px 15px rgba(0,0,0,0.3),
                inset 0 1px 0 rgba(255,255,255,0.2);
            position: relative;
            overflow: hidden;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .start-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 
                0 25px 50px rgba(102, 126, 234, 0.6),
                0 10px 30px rgba(0,0,0,0.4),
                inset 0 1px 0 rgba(255,255,255,0.3);
        }

        .start-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.7s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .start-btn:hover::before {
            left: 100%;
        }

        .start-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
            transition: all 0.4s ease;
            transform: translate(-50%, -50%);
            border-radius: 50%;
        }

        .start-btn:hover::after {
            width: 300px;
            height: 300px;
        }

        .warning-text {
            margin-top: 40px;
            font-size: 1rem;
            max-width: 600px;
            line-height: 1.6;
            background: linear-gradient(45deg, rgba(255,255,255,0.6), rgba(255,255,255,0.4));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            background-color: rgba(255,255,255,0.05);
        }

        /* Game Screen */
        .game-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        }

        @keyframes thoughtFloat {
            0% { 
                transform: scale(0) rotate(180deg); 
                opacity: 0; 
            }
            50% {
                transform: scale(1.1) rotate(-10deg);
            }
            100% { 
                transform: scale(1) rotate(0deg); 
                opacity: 1; 
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes modalPop {
            0% { transform: scale(0.7) translateY(50px); opacity: 0; }
            100% { transform: scale(1) translateY(0); opacity: 1; }
        }

        .anxiety-spiral {
            font-size: 3rem;
            animation: spiralSpin 2s linear infinite;
            margin: 20px 0;
        }

        @keyframes spiralSpin {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.2); }
            100% { transform: rotate(360deg) scale(1); }
        }

        /* Email Interface Improvements */
        .email-workspace {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 850px;
            height: 80vh;
            background: rgba(255,255,255,0.98);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            box-shadow: 
                0 30px 60px rgba(0,0,0,0.4),
                0 10px 30px rgba(0,0,0,0.2);
            color: #2c3e50;
            overflow: hidden;
            border: 2px solid rgba(255,255,255,0.3);
        }

        .email-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .header-title {
            font-size: 1.4rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .draft-info {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85rem;
            opacity: 0.9;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }

        .field-label {
            width: 80px;
            font-weight: 700;
            color: #34495e;
            font-size: 0.95rem;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .typing-area {
            width: 100%;
            height: 100%;
            border: none;
            outline: none;
            font-family: 'Inter', sans-serif;
            font-size: 1.05rem;
            line-height: 1.6;
            resize: none;
            background: transparent;
            padding: 15px;
            border-radius: 10px;
            transition: background 0.2s ease;
            color: #2c3e50;
            text-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }

        .typing-area::placeholder {
            color: #7f8c8d;
            font-style: italic;
            text-shadow: none;
        }

        .send-button {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(45deg, #ff4757, #ff3838);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 5px 15px rgba(255, 71, 87, 0.3);
            position: relative;
            overflow: hidden;
        }

        .send-button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(255, 71, 87, 0.4);
        }

        .send-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            box-shadow: none;
        }

        .send-button.sending {
            background: linear-gradient(45deg, #ffa502, #ff8c00);
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Choice System */
        .choice-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.95), rgba(0,0,0,0.7), transparent);
            backdrop-filter: blur(10px);
            padding: 50px 20px 30px;
            transform: translateY(100%);
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 100;
        }

        .choice-overlay.active {
            transform: translateY(0);
        }

        .choice-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            max-width: 900px;
            margin: 0 auto;
        }

        .choice-btn {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(15px);
            color: white;
            border: 2px solid rgba(255,255,255,0.2);
            padding: 18px 24px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
            font-size: 1rem;
            text-shadow: 0 2px 6px rgba(0,0,0,0.8);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
        }

        .choice-btn:hover {
            background: rgba(255,255,255,0.25);
            border-color: rgba(255,255,255,0.4);
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.4);
            text-shadow: 0 2px 8px rgba(0,0,0,0.9);
        }

        .choice-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }

        .choice-btn:hover::before {
            left: 100%;
        }

        /* Floating Elements */
        .thought-bubble {
            position: fixed;
            background: linear-gradient(135deg, #fffbaa, #fff9c4);
            border: 3px solid #ffd93d;
            border-radius: 25px;
            padding: 15px 20px;
            font-size: 0.9rem;
            max-width: 280px;
            z-index: 200;
            animation: thoughtFloat 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 
                0 15px 35px rgba(0,0,0,0.3),
                0 5px 15px rgba(255, 211, 61, 0.2);
            color: #2c3e50;
            font-weight: 600;
            cursor: pointer;
            text-shadow: 0 1px 2px rgba(255,255,255,0.8);
            line-height: 1.4;
        }

        .thought-bubble::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 25px;
            width: 0;
            height: 0;
            border: 10px solid transparent;
            border-top-color: #ffd93d;
            filter: drop-shadow(0 3px 6px rgba(0,0,0,0.2));
        }

        .distraction {
            position: fixed;
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
            color: white;
            padding: 15px 25px;
            border-radius: 30px;
            font-weight: 700;
            cursor: pointer;
            animation: distractionBounce 1.5s infinite;
            z-index: 200;
            box-shadow: 
                0 8px 25px rgba(255, 107, 107, 0.5),
                0 3px 10px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            font-size: 1rem;
            text-shadow: 0 2px 6px rgba(0,0,0,0.6);
            border: 2px solid rgba(255,255,255,0.2);
        }

        .distraction:hover {
            transform: scale(1.1);
            box-shadow: 
                0 15px 40px rgba(255, 107, 107, 0.7),
                0 5px 20px rgba(0,0,0,0.4);
            text-shadow: 0 3px 8px rgba(0,0,0,0.8);
        }

        @keyframes distractionBounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-15px); }
            60% { transform: translateY(-8px); }
        }

        /* Modal System */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            backdrop-filter: blur(8px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 500;
            animation: fadeIn 0.3s ease;
        }

        .modal {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 25px;
            padding: 50px;
            max-width: 550px;
            width: 90%;
            text-align: center;
            box-shadow: 
                0 30px 60px rgba(0,0,0,0.6),
                0 10px 30px rgba(0,0,0,0.3);
            color: #2c3e50;
            animation: modalPop 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            border: 3px solid rgba(255,255,255,0.8);
        }

        .modal h3 {
            font-size: 1.8rem;
            margin-bottom: 25px;
            color: #667eea;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-weight: 700;
        }

        .modal p {
            margin-bottom: 25px;
            line-height: 1.7;
            font-size: 1.1rem;
            color: #34495e;
            text-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }

        .modal-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            margin: 8px;
            transition: all 0.3s ease;
            font-size: 1rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .modal-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
            text-shadow: 0 2px 6px rgba(0,0,0,0.4);
        }

        /* Notification System */
        .notification {
            position: fixed;
            top: 100px;
            right: 20px;
            background: linear-gradient(45deg, #2ed573, #17a2b8);
            color: white;
            padding: 20px 30px;
            border-radius: 20px;
            box-shadow: 
                0 15px 35px rgba(0,0,0,0.4),
                0 5px 15px rgba(46, 213, 115, 0.3);
            animation: slideInRight 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 600;
            max-width: 350px;
            font-weight: 600;
            font-size: 1rem;
            text-shadow: 0 2px 6px rgba(0,0,0,0.5);
            border: 2px solid rgba(255,255,255,0.2);
            line-height: 1.4;
        }

        @keyframes slideInRight {
            from { 
                transform: translateX(100%); 
                opacity: 0; 
            }
            to { 
                transform: translateX(0); 
                opacity: 1; 
            }
        }

        /* Final Scenes */
        .victory-screen {
            background: linear-gradient(135deg, #2ed573 0%, #17a2b8 100%);
            color: white;
            text-align: center;
            padding: 40px;
            border-radius: 20px;
            margin: 20px;
            animation: victoryPulse 2s ease-in-out infinite alternate;
        }

        @keyframes victoryPulse {
            from { box-shadow: 0 0 20px rgba(46, 213, 115, 0.5); }
            to { box-shadow: 0 0 40px rgba(46, 213, 115, 0.8); }
        }

        .bonus-screen {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: #00ff00;
            font-family: 'JetBrains Mono', monospace;
            padding: 40px;
            border-radius: 20px;
            margin: 20px;
            border: 2px solid #00ff00;
            box-shadow: 0 0 30px rgba(0,255,0,0.3);
            animation: terminalFlicker 0.1s infinite alternate;
        }

        @keyframes terminalFlicker {
            0% { opacity: 0.98; }
            100% { opacity: 1; }
        }

        .stats-display {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            font-family: 'JetBrains Mono', monospace;
            backdrop-filter: blur(10px);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .game-hud {
                top: 10px;
                right: 10px;
                gap: 10px;
                padding: 12px 16px;
                font-size: 10px;
                min-width: 180px;
            }

            .stat-bar {
                width: 100px;
                height: 6px;
            }

            .stat-icon {
                font-size: 14px;
            }

            .email-workspace {
                width: 95%;
                height: 85vh;
                border-radius: 20px;
            }

            .choice-container {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .choice-btn {
                padding: 16px 20px;
                font-size: 0.95rem;
            }

            .title-logo {
                font-size: 2.5rem;
            }

            .subtitle {
                font-size: 1.2rem;
            }

            .game-description {
                font-size: 1rem;
                padding: 0 15px;
            }

            .start-btn {
                padding: 20px 35px;
                font-size: 1.1rem;
            }

            .modal {
                padding: 35px;
                margin: 20px;
            }

            .notification {
                top: 80px;
                right: 10px;
                max-width: 280px;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .game-hud {
                font-size: 9px;
                padding: 10px 12px;
                min-width: 160px;
            }

            .stat-bar {
                width: 80px;
                height: 5px;
            }

            .heart-rate {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="game-viewport">
        <!-- Enhanced HUD -->
        <div class="game-hud" id="gameHud" style="display: none;">
            <div class="stat-group">
                <div class="stat-icon">😰</div>
                <div class="stat-info">
                    <div class="stat-label">Anxiety</div>
                    <div class="stat-bar">
                        <div class="stat-fill anxiety-fill" id="anxietyBar"></div>
                    </div>
                </div>
            </div>
            <div class="stat-group">
                <div class="stat-icon">⏰</div>
                <div class="stat-info">
                    <div class="stat-label">Procrastination</div>
                    <div class="stat-bar">
                        <div class="stat-fill procrastination-fill" id="procrastinationBar"></div>
                    </div>
                </div>
            </div>
            <div class="stat-group">
                <div class="stat-icon">🧠</div>
                <div class="stat-info">
                    <div class="stat-label">Dopamine</div>
                    <div class="stat-bar">
                        <div class="stat-fill dopamine-fill" id="dopamineBar"></div>
                    </div>
                </div>
            </div>
            <div class="stat-group">
                <div class="stat-icon">🎯</div>
                <div class="stat-info">
                    <div class="stat-label">Focus</div>
                    <div class="stat-bar">
                        <div class="stat-fill focus-fill" id="focusBar"></div>
                    </div>
                </div>
            </div>
            <div class="heart-rate-group">
                <div class="stat-icon">💓</div>
                <span class="heart-rate" id="heartRate">72</span>
                <span style="font-size: 9px; opacity: 0.8;">BPM</span>
            </div>
        </div>

        <!-- Title Screen -->
        <div class="title-screen" id="titleScreen">
            <h1 class="title-logo">📧 THE EMAIL ODYSSEY</h1>
            <p class="subtitle">An Interactive ADHD Survival Simulator</p>
            <div class="game-description">
                Experience the epic journey of sending one (1) email when your brain runs on chaos energy. 
                Navigate through executive dysfunction, anxiety spirals, and the occasional dissociative episode 
                in this brutally accurate simulation of neurodivergent communication struggles.
            </div>
            <button class="start-btn" onclick="startGame()">
                Begin the Madness
            </button>
            <div class="warning-text">
                ⚠️ Warning: Contains realistic portrayals of executive dysfunction, existential email dread, 
                and the occasional dissociative episode. Side effects may include feeling deeply seen and validated.
            </div>
        </div>

        <!-- Game Screen -->
        <div class="game-screen" id="gameScreen">
            <div class="email-workspace">
                <div class="email-header">
                    <div class="header-title">
                        📧 Email Composer - The Final Boss
                    </div>
                    <div class="draft-info">
                        Draft saved <span id="draftCount">47</span> times | Last opened: 3 weeks ago
                    </div>
                </div>
                
                <div class="compose-area">
                    <div class="email-fields">
                        <div class="email-field">
                            <span class="field-label">To:</span>
                            <input type="text" class="field-input" value="sarah@work.com" readonly>
                        </div>
                        <div class="email-field">
                            <span class="field-label">Subject:</span>
                            <input type="text" class="field-input" id="subjectLine" placeholder="Following up on... the thing?">
                        </div>
                    </div>
                    
                    <div class="email-body-container">
                        <textarea class="typing-area" id="emailBody" placeholder="Hi Sarah, hope you're well...

(Your cursor blinks mockingly as your brain suggests 47 different ways to start this email)"></textarea>
                        <button class="send-button" id="sendButton" onclick="attemptSend()" disabled>
                            SEND (IF YOU DARE)
                        </button>
                    </div>
                </div>
            </div>

            <div class="choice-overlay" id="choiceOverlay">
                <div class="choice-container" id="choiceContainer">
                    <button class="choice-btn" onclick="makeChoice('overthink')">
                        🤔 Overthink the greeting for 20 minutes
                    </button>
                    <button class="choice-btn" onclick="makeChoice('distract')">
                        📱 Check social media "real quick"
                    </button>
                    <button class="choice-btn" onclick="makeChoice('anxiety')">
                        🌀 Spiral about email tone
                    </button>
                    <button class="choice-btn" onclick="makeChoice('brave')">
                        💪 Actually try to write something
                    </button>
                </div>
            </div>
        </div>

        <!-- Modal System -->
        <div class="modal-overlay" id="modalOverlay">
            <div class="modal" id="modal">
                <h3 id="modalTitle">Anxiety Spiral Detected!</h3>
                <div id="modalContent">
                    <div class="anxiety-spiral">🌀💭🌀</div>
                    <p>"What if Sarah thinks I'm unprofessional? What if I misspelled something? What if—"</p>
                    <button class="modal-btn" onclick="cope('breathe')">Deep breathing (fake it till you make it)</button>
                    <button class="modal-btn" onclick="cope('distract')">Look at cat videos</button>
                    <button class="modal-btn" onclick="cope('catastrophize')">Embrace the spiral</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let gameState = {
            anxiety: 20,
            procrastination: 85,
            dopamine: 15,
            focus: 10,
            heartRate: 72,
            stage: 'title',
            thoughtCount: 0,
            distractionCount: 0,
            drafts: 47,
            emailSent: false,
            choicesVisible: false
        };

        let thoughtBubbles = [
            "Is 'Hi' too casual?",
            "Should I say 'Dear Sarah'?", 
            "What if she thinks I'm weird?",
            "Maybe I should call instead?",
            "Do I sound desperate?",
            "Is this email even necessary?",
            "What if I'm overthinking this?",
            "I am definitely overthinking this",
            "But what if I'm not overthinking enough?",
            "Why is communication so hard?",
            "Maybe I should just quit my job",
            "Do I even remember what this is about?",
            "What if Sarah forgot about me entirely?",
            "I should probably Google proper email etiquette",
            "Is there a way to send emails anonymously?",
            "What would a neurotypical person do?",
            "This is taking longer than my actual work",
            "Maybe if I wait long enough the problem will solve itself",
            "What if this email ruins everything?",
            "Why didn't they teach email anxiety in school?"
        ];

        let distractions = [
            "🎵 New song just dropped!",
            "📱 Someone liked your post!",
            "🍕 You should probably eat something",
            "🧹 Your room is a disaster zone",
            "📺 That show you're watching has a new episode",
            "💸 Check if that thing you wanted is on sale",
            "🌐 Wikipedia rabbit hole awaits",
            "🎮 Quick game break?",
            "☕ Coffee sounds good right now",
            "📖 Remember that book you started?",
            "🚿 You should probably shower",
            "📞 Text someone back",
            "🗂️ Organize your desktop",
            "🎨 Learn a new skill on YouTube",
            "🌤️ Check the weather for no reason"
        ];

        function updateStats() {
            // Update visual bars
            document.getElementById('anxietyBar').style.width = gameState.anxiety + '%';
            document.getElementById('procrastinationBar').style.width = gameState.procrastination + '%';
            document.getElementById('dopamineBar').style.width = gameState.dopamine + '%';
            document.getElementById('focusBar').style.width = gameState.focus + '%';
            
            // Update heart rate
            document.getElementById('heartRate').textContent = gameState.heartRate;
            
            // Update draft count
            document.getElementById('draftCount').textContent = gameState.drafts;
        }

        function startGame() {
            document.getElementById('titleScreen').style.display = 'none';
            document.getElementById('gameScreen').style.display = 'block';
            document.getElementById('gameHud').style.display = 'flex';
            
            gameState.stage = 'writing';
            
            // Show initial choices after a moment
            setTimeout(() => {
                showChoices();
            }, 2000);
            
            // Start the chaos
            setTimeout(spawnThoughtBubble, 3000);
            setTimeout(spawnDistraction, 8000);
            enableWriting();
        }

        function showChoices() {
            if (!gameState.choicesVisible) {
                document.getElementById('choiceOverlay').classList.add('active');
                gameState.choicesVisible = true;
            }
        }

        function hideChoices() {
            document.getElementById('choiceOverlay').classList.remove('active');
            gameState.choicesVisible = false;
        }

        function spawnThoughtBubble() {
            if (gameState.stage !== 'writing' || gameState.thoughtCount > 15) return;
            
            const bubble = document.createElement('div');
            bubble.className = 'thought-bubble';
            bubble.textContent = thoughtBubbles[Math.floor(Math.random() * thoughtBubbles.length)];
            
            // Random position (avoid HUD area)
            bubble.style.left = Math.random() * (window.innerWidth - 250) + 'px';
            bubble.style.top = Math.random() * (window.innerHeight - 200) + 100 + 'px';
            
            bubble.onclick = () => {
                bubble.remove();
                gameState.anxiety = Math.max(0, gameState.anxiety - 2);
                updateStats();
                showNotification("Thought dismissed! +2 sanity points");
            };
            
            document.body.appendChild(bubble);
            gameState.thoughtCount++;
            
            // Increase anxiety
            gameState.anxiety = Math.min(100, gameState.anxiety + 3);
            gameState.heartRate = Math.min(120, gameState.heartRate + 1);
            updateStats();
            
            // Remove after 4 seconds
            setTimeout(() => {
                if (bubble.parentNode) {
                    bubble.remove();
                }
            }, 4000);
            
            // Spawn next bubble
            setTimeout(spawnThoughtBubble, Math.random() * 4000 + 3000);
        }

        function spawnDistraction() {
            if (gameState.stage !== 'writing' || gameState.distractionCount > 10) return;
            
            const distraction = document.createElement('div');
            distraction.className = 'distraction';
            distraction.textContent = distractions[Math.floor(Math.random() * distractions.length)];
            
            distraction.style.left = Math.random() * (window.innerWidth - 250) + 'px';
            distraction.style.top = Math.random() * 300 + 100 + 'px';
            
            distraction.onclick = () => {
                gameState.procrastination = Math.min(100, gameState.procrastination + 8);
                gameState.focus = Math.max(0, gameState.focus - 12);
                gameState.dopamine = Math.min(100, gameState.dopamine + 5);
                updateStats();
                
                showNotification("Distraction successful! Wait, what were you doing again?");
                distraction.remove();
            };
            
            document.body.appendChild(distraction);
            gameState.distractionCount++;
            
            setTimeout(() => {
                if (distraction.parentNode) {
                    distraction.remove();
                }
            }, 10000);
            
            setTimeout(spawnDistraction, Math.random() * 12000 + 8000);
        }

        function makeChoice(choice) {
            hideChoices();
            
            switch(choice) {
                case 'overthink':
                    gameState.anxiety += 15;
                    gameState.procrastination += 12;
                    gameState.focus -= 8;
                    showModal('overthink');
                    break;
                case 'distract':
                    gameState.procrastination += 20;
                    gameState.dopamine += 8;
                    gameState.focus -= 15;
                    showNotification("3 hours later: You're now an expert on penguin migration patterns.");
                    setTimeout(showChoices, 3000);
                    break;
                case 'anxiety':
                    gameState.anxiety += 25;
                    gameState.heartRate += 15;
                    showModal('anxiety');
                    break;
                case 'brave':
                    gameState.focus += 12;
                    gameState.anxiety += 5;
                    document.getElementById('emailBody').value = "Hi Sarah,\n\n";
                    showNotification("Incredible! You wrote two whole words!");
                    setTimeout(showChoices, 2000);
                    break;
            }
            updateStats();
        }

        function showModal(type) {
            const overlay = document.getElementById('modalOverlay');
            const title = document.getElementById('modalTitle');
            const content = document.getElementById('modalContent');
            
            overlay.style.display = 'flex';
            
            if (type === 'anxiety') {
                title.textContent = 'Anxiety Spiral Detected!';
                content.innerHTML = `
                    <div class="anxiety-spiral">🌀💭🌀</div>
                    <p>"What if Sarah thinks I'm unprofessional? What if I misspelled something? What if she screenshots this and shows everyone? What if—"</p>
                    <button class="modal-btn" onclick="cope('breathe')">🫁 Deep breathing (fake it till you make it)</button>
                    <button class="modal-btn" onclick="cope('distract')">🐱 Look at cat videos</button>
                    <button class="modal-btn" onclick="cope('catastrophize')">🌪️ Embrace the spiral</button>
                `;
            } else if (type === 'overthink') {
                title.textContent = 'Overthinking Protocol Activated';
                content.innerHTML = `
                    <p>You've been staring at "Hi" for 20 minutes. The cursor blinks mockingly.</p>
                    <p>Your brain helpfully suggests 47 alternatives:</p>
                    <div style="font-family: 'JetBrains Mono', monospace; font-size: 12px; margin: 15px 0; background: #f5f5f5; padding: 10px; border-radius: 8px; color: #333;">
                        "Hello" | "Hey" | "Greetings" | "Salutations" | "Dear Sarah" | "Sarah!" | "Yo" | <em>*deletes everything*</em>
                    </div>
                    <button class="modal-btn" onclick="cope('commit')">✅ Just go with "Hi"</button>
                    <button class="modal-btn" onclick="cope('research')">🔍 Google proper email greetings</button>
                `;
            }
        }

        function cope(method) {
            const overlay = document.getElementById('modalOverlay');
            overlay.style.display = 'none';
            
            switch(method) {
                case 'breathe':
                    gameState.anxiety = Math.max(0, gameState.anxiety - 12);
                    gameState.focus += 8;
                    showNotification("Deep breaths... You can do this. Probably. Maybe.");
                    break;
                case 'distract':
                    gameState.dopamine += 12;
                    gameState.procrastination += 15;
                    showNotification("Cat videos: the universal cure for existential dread.");
                    break;
                case 'catastrophize':
                    gameState.anxiety += 15;
                    gameState.heartRate += 12;
                    showNotification("You chose chaos. We respect the commitment.");
                    break;
                case 'commit':
                    gameState.focus += 15;
                    gameState.anxiety -= 8;
                    const currentText = document.getElementById('emailBody').value;
                    if (!currentText.includes("Hi Sarah")) {
                        document.getElementById('emailBody').value = "Hi Sarah,\n\n" + currentText;
                    }
                    showNotification("Progress! You're basically a communication expert now.");
                    break;
                case 'research':
                    gameState.procrastination += 25;
                    gameState.anxiety += 8;
                    showNotification("4 hours later: You're now fluent in 18th-century epistolary etiquette.");
                    break;
            }
            updateStats();
            
            setTimeout(showChoices, 2000);
        }

        function enableWriting() {
            const emailBody = document.getElementById('emailBody');
            const sendButton = document.getElementById('sendButton');
            
            emailBody.addEventListener('input', function() {
                gameState.drafts++;
                updateStats();
                
                if (this.value.length > 15) {
                    sendButton.disabled = false;
                    gameState.focus = Math.min(100, gameState.focus + 2);
                    gameState.dopamine = Math.min(100, gameState.dopamine + 1);
                } else {
                    sendButton.disabled = true;
                }
                
                // Random anxiety spikes while typing
                if (Math.random() < 0.08) {
                    gameState.anxiety = Math.min(100, gameState.anxiety + 3);
                    updateStats();
                }
                
                // Hide choices when actively typing
                if (this.value.length > 5) {
                    hideChoices();
                }
            });
        }

        function attemptSend() {
            const emailContent = document.getElementById('emailBody').value;
            
            if (emailContent.length < 15) {
                showNotification("Error: Email too short. Your brain demands more overthinking.");
                return;
            }
            
            // Dramatic send sequence
            gameState.anxiety = 100;
            gameState.heartRate = 120;
            hideChoices();
            updateStats();
            
            const sendButton = document.getElementById('sendButton');
            sendButton.textContent = "SENDING...";
            sendButton.classList.add('sending');
            sendButton.disabled = true;
            
            // Simulate sending delay with increasing anxiety
            let countdown = 3;
            const countdownInterval = setInterval(() => {
                sendButton.textContent = `SENDING... ${countdown}`;
                countdown--;
                if (countdown < 0) {
                    clearInterval(countdownInterval);
                    showFinalScene();
                }
            }, 1000);
        }

        function showFinalScene() {
            const gameScreen = document.getElementById('gameScreen');
            gameScreen.innerHTML = `
                <div class="victory-screen">
                    <h1>🎉 EMAIL SENT! 🎉</h1>
                    <h3>Achievement Unlocked: Email Warrior</h3>
                    <p style="font-size: 1.2rem; margin: 20px 0;">After 3 weeks, 2 mental breakdowns, and 1 dissociative nap...</p>
                    
                    <div class="stats-display">
                        <strong>🏆 Final Battle Stats:</strong><br><br>
                        📝 Total drafts: ${gameState.drafts}<br>
                        😰 Anxiety peaks: ${gameState.thoughtCount}<br>
                        📱 Distractions survived: ${gameState.distractionCount}<br>
                        ⏰ Time to send: 3 weeks, 2 days, 14 hours<br>
                        🧠 Mental health: Questionable but intact<br>
                        💪 Executive function: Still broken, but we persevered
                    </div>
                    
                    <h2 style="margin: 30px 0;">"You survived the ADHD email odyssey. Your executive function may be broken, but your spirit is unbreakable."</h2>
                    
                    <button class="start-btn" onclick="showBonus()" style="margin: 10px;">Show Bonus Scene</button>
                    <button class="start-btn" onclick="location.reload()" style="margin: 10px;">Play Again (Masochist Mode)</button>
                </div>
            `;
        }

        function showBonus() {
            const gameScreen = document.getElementById('gameScreen');
            gameScreen.innerHTML = `
                <div class="bonus-screen">
                    <h2>📧 BONUS SCENE: THE REPLY 📧</h2>
                    <div style="margin: 30px 0; text-align: left; background: rgba(0,255,0,0.1); padding: 20px; border-radius: 10px;">
                        <strong>From:</strong> sarah@work.com<br>
                        <strong>To:</strong> you@yourcompany.com<br>
                        <strong>Subject:</strong> RE: Following up on... the thing?<br>
                        <strong>Sent:</strong> 2 minutes after you finally hit send<br><br>
                        <strong>Message:</strong><br>
                        <span style="font-size: 1.5rem; color: #00ff41;">
                        "Got it, thanks!"
                        </span>
                    </div>
                    <p style="margin-top: 30px; font-size: 1.5rem; text-shadow: 0 0 10px #00ff00;">
                        THREE. FUCKING. WORDS.
                    </p>
                    <p style="margin-top: 20px;">
                        All that emotional labor...<br>
                        All that anxiety...<br>
                        All those spirals...<br>
                        All those drafts...<br><br>
                        For "Got it, thanks!"
                    </p>
                    <p style="margin-top: 30px; font-size: 14px; opacity: 0.8;">
                        But hey, at least you didn't overthink it, right?<br>
                        ...right?<br><br>
                        <em>*nervous laughter intensifies*</em>
                    </p>
                    <button class="start-btn" onclick="location.reload()" style="margin-top: 30px;">
                        Start Your Next Email Adventure
                    </button>
                </div>
            `;
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 4000);
        }

        // Initialize
        updateStats();
        
        // Random heart rate fluctuations
        setInterval(() => {
            if (gameState.stage === 'writing') {
                gameState.heartRate += Math.random() * 3 - 1.5;
                gameState.heartRate = Math.max(65, Math.min(125, gameState.heartRate));
                updateStats();
            }
        }, 2000);

        // Prevent accidental page navigation
        window.addEventListener('beforeunload', function(e) {
            if (gameState.stage === 'writing' && !gameState.emailSent) {
                e.preventDefault();
                e.returnValue = 'Are you sure you want to leave? Your email draft will be lost forever! (Just like all the others...)';
            }
        });
    </script>
</body>
</html>
